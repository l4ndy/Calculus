<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VMware by Broadcom License Calculator - Subscription Model</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        overflow: hidden;
    }

    .header {
        background: linear-gradient(135deg, #2c3e50, #4a6741);
        color: white;
        padding: 30px;
        text-align: center;
    }

    .header h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
        font-weight: 300;
    }

    .header p {
        font-size: 1.1em;
        opacity: 0.9;
    }

    .content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        padding: 40px;
    }

    .input-section {
        background: #f8f9fa;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }

    .results-section {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .form-group {
        margin-bottom: 25px;
    }

    label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #2c3e50;
    }

    select, input {
        width: 100%;
        padding: 12px 15px;
        border: 2px solid #e9ecef;
        border-radius: 8px;
        font-size: 16px;
        transition: all 0.3s ease;
        background: white;
    }

    select:focus, input:focus {
        outline: none;
        border-color: #667eea;
        transform: translateY(-2px);
    }

    .add-cluster-btn {
        width: 100%;
        padding: 12px;
        background: #28a745;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 15px;
    }

    .add-cluster-btn:hover {
        background: #218838;
        transform: translateY(-2px);
    }

    .cluster-config {
        border: 2px solid #e9ecef;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 20px;
        background: #f8f9fa;
    }

    .remove-cluster-btn {
        background: #dc3545;
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
        margin-top: 10px;
    }

    .remove-cluster-btn:hover {
        background: #c82333;
    }

    .footer {
        text-align: center;
        padding: 20px;
        background: #2c3e50;
        color: white;
        font-size: 0.9em;
    }

    .calculate-btn {
        width: 100%;
        padding: 15px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 18px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 20px;
    }

    .calculate-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
    }

    .result-item {
        background: rgba(255, 255, 255, 0.1);
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 15px;
        border-left: 4px solid #fff;
    }

    .result-item h3 {
        font-size: 1.3em;
        margin-bottom: 10px;
    }

    .result-item p {
        font-size: 1.1em;
        opacity: 0.9;
    }

    .warning {
        background: #fff3cd;
        color: #856404;
        padding: 15px;
        border-radius: 8px;
        margin-top: 20px;
        border-left: 4px solid #ffc107;
    }

    .info-box {
        background: #e7f3ff;
        color: #0c5460;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
        border-left: 4px solid #0dcaf0;
    }

    @media (max-width: 768px) {
        .content {
            grid-template-columns: 1fr;
            gap: 20px;
            padding: 20px;
        }
        
        .header h1 {
            font-size: 2em;
        }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <h1>VMware by Broadcom License Calculator</h1>
            <p>Subscription Licensing Model - VCF, VVF & vSAN Calculator</p>
        </div>

```
    <div class="content">
        <div class="input-section">
            <div class="info-box">
                <strong>Disclaimer:</strong> This calculator provides estimates based on publicly available information about VMware by Broadcom licensing. Actual pricing may vary significantly based on enterprise agreements, volume discounts, and specific terms negotiated with VMware by Broadcom. Always consult with VMware by Broadcom directly or OEM resellers for official pricing and licensing requirements. This tool is for estimation purposes only.
            </div>

            <form id="licenseForm">
                <div class="form-group">
                    <label for="licenseType">License Type</label>
                    <select id="licenseType" required>
                        <option value="">Select License Type</option>
                        <option value="VVF">VMware vSphere Foundation (VVF)</option>
                        <option value="VCF">VMware Cloud Foundation (VCF)</option>
                        <option value="VEP">VMware vSphere Enterprise Plus</option>
                    </select>
                </div>

                <h3 style="margin: 25px 0 15px 0; color: #2c3e50;">Cluster Configuration</h3>
                <div id="clustersContainer">
                    <div class="cluster-config" data-cluster="1">
                        <h4 style="color: #667eea; margin-bottom: 15px;">Cluster 1</h4>
                        
                        <div class="form-group">
                            <label for="nodes-1">Number of Nodes</label>
                            <input type="number" id="nodes-1" class="nodes-input" min="1" max="1000" required>
                        </div>

                        <div class="form-group">
                            <label for="cpuSockets-1">CPU Sockets per Node</label>
                            <input type="number" id="cpuSockets-1" class="cpuSockets-input" min="1" max="8" required>
                        </div>

                        <div class="form-group">
                            <label for="coresPerCpu-1">Cores per CPU</label>
                            <input type="number" id="coresPerCpu-1" class="coresPerCpu-input" min="1" max="128" required>
                        </div>

                        <div class="form-group">
                            <label for="vsanCapacity-1">Raw vSAN Storage Capacity per cluster (TiB)</label>
                            <input type="number" id="vsanCapacity-1" class="vsanCapacity-input" min="0" max="10000" step="0.1">
                        </div>
                    </div>
                </div>

                <button type="button" id="addClusterBtn" class="add-cluster-btn">+ Add Another Cluster</button>
                <button type="submit" class="calculate-btn">Calculate Licenses</button>
            </form>
        </div>

        <div class="results-section">
            <h2>Licensing Results</h2>
            <div id="results">
                <p style="text-align: center; opacity: 0.7; font-size: 1.1em; margin-top: 50px;">
                    Fill in the form and click "Calculate Licenses" to see your licensing requirements.
                </p>
            </div>
        </div>
    </div>
    
    <div class="footer">
        <p>© 2025 Landi Elezi. All rights reserved.</p>
    </div>
</div>

<script>
    let clusterCount = 1;

    // Add cluster functionality
    document.getElementById('addClusterBtn').addEventListener('click', function() {
        clusterCount++;
        const clustersContainer = document.getElementById('clustersContainer');
        
        const newCluster = document.createElement('div');
        newCluster.className = 'cluster-config';
        newCluster.setAttribute('data-cluster', clusterCount);
        
        newCluster.innerHTML = `
            <h4 style="color: #667eea; margin-bottom: 15px;">Cluster ${clusterCount}</h4>
            
            <div class="form-group">
                <label for="nodes-${clusterCount}">Number of Nodes</label>
                <input type="number" id="nodes-${clusterCount}" class="nodes-input" min="1" max="1000" required>
            </div>

            <div class="form-group">
                <label for="cpuSockets-${clusterCount}">CPU Sockets per Node</label>
                <input type="number" id="cpuSockets-${clusterCount}" class="cpuSockets-input" min="1" max="8" required>
            </div>

            <div class="form-group">
                <label for="coresPerCpu-${clusterCount}">Cores per CPU</label>
                <input type="number" id="coresPerCpu-${clusterCount}" class="coresPerCpu-input" min="1" max="128" required>
            </div>

            <div class="form-group">
                <label for="vsanCapacity-${clusterCount}">Raw vSAN Storage Capacity (TiB)</label>
                <input type="number" id="vsanCapacity-${clusterCount}" class="vsanCapacity-input" min="0" max="10000" step="0.1">
            </div>
            
            <button type="button" class="remove-cluster-btn" onclick="removeCluster(${clusterCount})">Remove Cluster</button>
        `;
        
        clustersContainer.appendChild(newCluster);
    });

    // Remove cluster functionality
    function removeCluster(clusterId) {
        const clusterElement = document.querySelector(`[data-cluster="${clusterId}"]`);
        if (clusterElement) {
            clusterElement.remove();
        }
    }

    // Form submission handler
    document.getElementById('licenseForm').addEventListener('submit', function(e) {
        e.preventDefault();
        calculateLicenses();
    });

    function calculateLicenses() {
        const licenseType = document.getElementById('licenseType').value;
        
        // Collect data from all clusters
        const clusters = [];
        const clusterElements = document.querySelectorAll('.cluster-config');
        
        clusterElements.forEach((cluster, index) => {
            const clusterId = cluster.getAttribute('data-cluster');
            const nodes = parseInt(document.getElementById(`nodes-${clusterId}`).value) || 0;
            const cpuSockets = parseInt(document.getElementById(`cpuSockets-${clusterId}`).value) || 0;
            const coresPerCpu = parseInt(document.getElementById(`coresPerCpu-${clusterId}`).value) || 0;
            const vsanCapacity = parseFloat(document.getElementById(`vsanCapacity-${clusterId}`).value) || 0;
            
            clusters.push({
                id: clusterId,
                nodes: nodes,
                cpuSockets: cpuSockets,
                coresPerCpu: coresPerCpu,
                vsanCapacity: vsanCapacity,
                totalCores: nodes * cpuSockets * coresPerCpu,
                totalSockets: nodes * cpuSockets
            });
        });

        // Calculate totals across all clusters
        const totals = clusters.reduce((acc, cluster) => {
            acc.totalCores += cluster.totalCores;
            acc.totalSockets += cluster.totalSockets;
            acc.totalNodes += cluster.nodes;
            acc.totalVsanCapacity += cluster.vsanCapacity;
            return acc;
        }, { totalCores: 0, totalSockets: 0, totalNodes: 0, totalVsanCapacity: 0 });

        let licensesNeeded = 0;
        let licenseUnit = '';
        let estimatedCost = 0;
        let warnings = [];
        let vsanLicensesNeeded = 0;
        let vsanCost = 0;
        let vsanAllowance = 0;
        let vsanAddOnNeeded = 0;

        switch (licenseType) {
            case 'VVF':
                licensesNeeded = Math.max(totals.totalCores, 50);
                licenseUnit = 'cores';
                estimatedCost = licensesNeeded * 150; // £150 per core (updated pricing)
                
                vsanAllowance = licensesNeeded * 0.25;
                
                if (totals.totalVsanCapacity > vsanAllowance) {
                    vsanAddOnNeeded = totals.totalVsanCapacity - vsanAllowance;
                    vsanCost = vsanAddOnNeeded * 115; // £115 per TiB
                }
                
                if (licensesNeeded === 50 && totals.totalCores < 50) {
                    warnings.push(`Minimum 50 cores required for VVF. You have ${totals.totalCores} cores but will pay for 50.`);
                }
                break;

            case 'VCF':
                licensesNeeded = Math.max(totals.totalCores, 100);
                licenseUnit = 'cores';
                estimatedCost = licensesNeeded * 350; // £350 per core (updated pricing)
                
                vsanAllowance = licensesNeeded * 1.0;
                
                if (totals.totalVsanCapacity > vsanAllowance) {
                    vsanAddOnNeeded = totals.totalVsanCapacity - vsanAllowance;
                    vsanCost = vsanAddOnNeeded * 115; // £115 per TiB
                }
                
                if (licensesNeeded === 100 && totals.totalCores < 100) {
                    warnings.push(`Minimum 100 cores required for VCF. You have ${totals.totalCores} cores but will pay for 100.`);
                }
                break;

            case 'VEP':
                licensesNeeded = totals.totalSockets;
                licenseUnit = 'sockets';
                estimatedCost = licensesNeeded * 1900; // £1900 per socket
                
                if (totals.totalVsanCapacity > 0) {
                    vsanLicensesNeeded = Math.ceil(totals.totalVsanCapacity);
                    vsanCost = vsanLicensesNeeded * 230; // £230 per TiB
                }
                break;
        }

        displayResults(licenseType, licensesNeeded, licenseUnit, totals, estimatedCost, vsanLicensesNeeded, vsanCost, vsanAllowance, vsanAddOnNeeded, warnings, clusters);
    }

    function displayResults(licenseType, licensesNeeded, licenseUnit, totals, estimatedCost, vsanLicensesNeeded, vsanCost, vsanAllowance, vsanAddOnNeeded, warnings, clusters) {
        const resultsDiv = document.getElementById('results');
        
        let licenseTypeName = '';
        switch (licenseType) {
            case 'VVF': licenseTypeName = 'VMware vSphere Foundation'; break;
            case 'VCF': licenseTypeName = 'VMware Cloud Foundation'; break;
            case 'VEP': licenseTypeName = 'VMware vSphere Enterprise Plus'; break;
        }

        let html = `
            <div class="result-item">
                <h3>License Requirement</h3>
                <p><strong>${licensesNeeded} ${licenseUnit}</strong> for ${licenseTypeName}</p>
                ${vsanLicensesNeeded > 0 ? `<p><strong>${vsanLicensesNeeded} TiB</strong> vSAN licenses needed</p>` : ''}
                ${vsanAddOnNeeded > 0 ? `<p><strong>${vsanAddOnNeeded.toFixed(2)} TiB</strong> vSAN add-on licenses needed</p>` : ''}
            </div>

            <div class="result-item">
                <h3>Total Infrastructure Summary</h3>
                <p>Total Clusters: ${clusters.length}</p>
                <p>Total Nodes: ${totals.totalNodes}</p>
                <p>Total Cores: ${totals.totalCores}</p>
                <p>Total Sockets: ${totals.totalSockets}</p>
                ${totals.totalVsanCapacity > 0 ? `<p>Total Raw vSAN Capacity: ${totals.totalVsanCapacity} TiB</p>` : ''}
                ${vsanAllowance > 0 ? `<p>vSAN Allowance Included: ${vsanAllowance.toFixed(2)} TB</p>` : ''}
            </div>

            <div class="result-item">
                <h3>Cluster Breakdown</h3>
        `;
        
        clusters.forEach(cluster => {
            html += `
                <div style="background: rgba(255,255,255,0.1); padding: 10px; margin: 5px 0; border-radius: 5px;">
                    <strong>Cluster ${cluster.id}:</strong> ${cluster.nodes} nodes, ${cluster.totalCores} cores, ${cluster.totalSockets} sockets
                    ${cluster.vsanCapacity > 0 ? `, ${cluster.vsanCapacity} TB vSAN` : ''}
                </div>
            `;
        });
        
        html += `
            </div>

            <div class="result-item">
                <h3>Estimated Annual Cost</h3>
                <p><strong>Base License: £${estimatedCost.toLocaleString()}</strong></p>
                ${vsanCost > 0 ? `<p><strong>vSAN Add-on: £${vsanCost.toLocaleString()}</strong></p>` : ''}
                ${vsanCost > 0 ? `<p><strong>Total: £${(estimatedCost + vsanCost).toLocaleString()}</strong></p>` : ''}
                <p style="font-size: 0.9em; opacity: 0.8;">*Approximate pricing in British Sterling - contact VMware for exact quotes</p>
            </div>
        `;

        // Add vSAN allowance explanation
        if (vsanAllowance > 0) {
            html += `
                <div class="result-item">
                    <h3>vSAN Storage Breakdown</h3>
                    <p>Included with license: ${vsanAllowance.toFixed(2)} TB</p>
                    ${totals.totalVsanCapacity > 0 ? `<p>Required capacity: ${totals.totalVsanCapacity} TB</p>` : ''}
                    ${vsanAddOnNeeded > 0 ? 
                        `<p style="color: #ffc107;">Additional capacity needed: ${vsanAddOnNeeded.toFixed(2)} TB</p>` : 
                        totals.totalVsanCapacity > 0 ? `<p style="color: #28a745;">✓ Sufficient capacity included</p>` : ''
                    }
                </div>
            `;
        }

        if (warnings.length > 0) {
            html += '<div class="warning">';
            warnings.forEach(warning => {
                html += `<p><strong>Warning:</strong> ${warning}</p>`;
            });
            html += '</div>';
        }

        resultsDiv.innerHTML = html;
    }
</script>
```

</body>
</html>
